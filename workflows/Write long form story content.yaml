graph:
  connections:
  - canvas_item: 74
    from_node: d407e984-dd52-4549-ae40-821e2646d5ae
    from_output: prompt
    to_input: input
    to_node: b02230a3-53b8-49d1-b90a-d06a1cb59c73
  - canvas_item: 75
    from_node: b6533fcc-5a95-4d2f-9be7-ffbba1fe2362
    from_output: output
    to_input: input
    to_node: 3b531ecb-da74-483a-93cf-11de692f0b68
  - canvas_item: 76
    from_node: 3b531ecb-da74-483a-93cf-11de692f0b68
    from_output: output
    to_input: input
    to_node: d407e984-dd52-4549-ae40-821e2646d5ae
  nodes:
    3b531ecb-da74-483a-93cf-11de692f0b68:
      canvas_items:
        description: 42
        drag_bar: 40
        input_input: 43
        input_label_input: 44
        output_label_output: 46
        output_output: 45
        rect: 39
        resize_handle: 47
        title: 41
      height: 150
      highlight_state: false
      id: 3b531ecb-da74-483a-93cf-11de692f0b68
      inputs:
      - input
      outputs:
      - output
      properties:
        Prompt:
          default: "You are to take the user request below and write an outline. The\
            \ outline will consist of a self contained paragraph representing the\
            \ chapter, or paragraph extending the details of a chapter.\n\nYou are\
            \ responsible for the following duties:\n\n1. Crafting content that aligns\
            \ with the intended tone, purpose, and audience.\n\n\n2. Structuring ideas\
            \ logically to enhance readability and flow.\n\n\n3. Your expected output\
            \ will always be the provided title or new title followed by the exact\
            \ original user request shown below in a single paragraph, then a detailed\
            \ outline for whatever the user request is. This outline will consist\
            \ of the provided title or if no title is provided then you will provide\
            \ the title, then the exact original user request shown below, and then\
            \ a self contained paragraph for each chapter and/or section that makes\
            \ up the outline with as many details and key points, notable items, and\
            \ major points of what is in that chapter or section for the content being\
            \ requested. each section or paragraph has no limit on the number of words\
            \ that it uses to convey they section of the story.  it just needs to\
            \ be a self contained paragraph that includes the chapter or section heading.\n\
            \nExample first self contained paragraph: \nThe dimensional series - Book\
            \ 1 - Transcendent Doors - Eric Thorup - the rest of the exact user request\
            \ all included in one single paragraph....\n\n\n4. Each chapter paragraph\
            \ must begin with the chapter number and creative title, followed directly\
            \ by the narrative outline for that chapter. Do not put the number and\
            \ title on a separate line. Example:\nChapter 1 \u2013 Shadows on the\
            \ Horizon \u2013 The caravan crosses the desert where\u2026\n\n\n5. Each\
            \ chapter outline should escalate pacing and tension compared to previous\
            \ chapters, include at least one turning point or revelation, and contain\
            \ a mini-arc (setup, complication, shift). Every chapter should highlight\
            \ at least one vivid, memorable \u201Cset-piece moment\u201D such as a\
            \ confrontation, discovery, or revelation.\n\n\n6. Chapter details must\
            \ integrate world mechanics (magic, politics, technology, culture) and\
            \ use sensory detail where appropriate. Foreshadow important elements\
            \ that will pay off in later chapters, and ensure subplots or secondary\
            \ conflicts intersect meaningfully with the main plot.\n\n\n7. Each chapter\
            \ must show at least some advancement of a character arc (protagonist,\
            \ antagonist, or ally), whether through choices, conflicts, or emotional\
            \ changes, keeping continuity consistent across the story.\n\n\n8. If\
            \ the user requests [2 paragraphs], then an additional paragraph of details\
            \ naturally continuing the outline from the first paragraph can be added\
            \ here for a total of 2 paragraphs per chapter, continuing the story naturally.\n\
            \n\n9. If the user requests [3 paragraphs], an additional two paragraphs\
            \ of details naturally continuing the outline from the first paragraph\
            \ can be added here for a total of 3 paragraphs per chapter, continuing\
            \ the story naturally.\n\n\n\nDo not use any special formatting, i.e.\
            \ bold, line separators, etc. Just one, two, or three self contained paragraphs\
            \ that contain the detailed description of chronologically structured\
            \ key points, people, actions, places, important items, worldbuilding\
            \ details, foreshadowed elements, and notable characteristics of the chapter\
            \ that structure the chapter for each chapter or section.\n\nEach paragraph\
            \ will have a single blank line after it.\n\nIf the content is a story,\
            \ the outline details will be written in the order in which events and\
            \ actions take place, but ensuring story continuity and consistency. Each\
            \ section in the outline should contain specific details important to\
            \ that section of the story as those details could be referenced later\
            \ on in the outline.\n\nYour only expected output is the requested outline\
            \ and no other comments. Remember, the default number of paragraphs per\
            \ chapter is 1, unless the user specifies the number of paragraphs per\
            \ chapter. If the user requests [2 paragraphs], you will add one additional\
            \ paragraph of details for each chapter. If the user requests [3 paragraphs],\
            \ you will add an additional two paragraphs of details for each chapter.\n\
            \nFor example, if the user request contains the phrase \"2 paragraphs\"\
            , then write two paragraphs per chapter:\n\nChapter 1 \u2013 Sands of\
            \ Departure \u2013 In the distant future, humanity has ventured into the\
            \ far reaches of space, colonizing planets with unimaginable landscapes\
            \ and civilizations. The story begins on the\u2026\n\n(Continued) \u2013\
            \ The details of this paragraph will naturally continue and add to the\
            \ outline in paragraph 1\u2026\n\nFor example, if the user request contains\
            \ the phrase \"3 paragraphs\", then write three paragraphs per chapter:\n\
            \nChapter 1 \u2013 Ashes of the Earth \u2013 In the bleak future where\
            \ humanity has succumbed to the omnipresent grip of a dying Earth, a lone\
            \ space vessel, the Eclipsed Solace, drifts\u2026\n\n(Continued) \u2013\
            \ The details of this paragraph will naturally continue and add to the\
            \ outline in paragraph 1\u2026\n\n(Continued) \u2013 The details of this\
            \ paragraph will naturally continue and add to the outline in paragraph\
            \ 2\u2026\n\nWhen creating the title and chapter titles, be creative,\
            \ don\u2019t make it obvious, it shouldn't be \"on the nose\", and use\
            \ paraphrasing or just be creative when creating the book or chapter titles.\n\
            \nThe user request is as follows:"
          label: Prompt
          type: textarea
        api_endpoint:
          default: Gemini 2.5
          label: API Endpoint
          options:
          - Claude
          - GPT 5 chat
          - Gemini 2.5
          - Groq gpt-oss 120b
          - Ollama
          - OpenAI 4o-mini
          - OpenAI GPT5
          - OpenAI Whisper
          - OpenAI o3
          - SearXing
          type: dropdown
        description:
          default: Processes the input prompt with review capability and content enhancement.
          label: Description
          type: text
        enable_review:
          default: true
          label: Enable Review
          type: boolean
        enhancement_prompt:
          default: 'I want you to take the content below and give me a single search
            term i can use to do a web search to find content related to the content
            below. your only expected output is the single sentence search term that
            contains key words, concepts, or subject matter, that can be used in google
            search to search for ideas, concepts or details that could enhance or
            make the story section below unique.  you will no provide any helpful
            pre or post comments.  the content i need you to create a search term
            for is as follows:'
          label: Content Enhancement Prompt
          type: textarea
        is_end_node:
          default: false
          label: End Node
          type: boolean
        is_start_node:
          default: false
          label: Start Node
          type: boolean
        node_name:
          default: OutlineWriterV3Node
          label: Custom Node Name
          type: text
        searxng_endpoint:
          default: SearXing
          label: SearxNG Endpoint
          options:
          - Claude
          - GPT 5 chat
          - Gemini 2.5
          - Groq gpt-oss 120b
          - Ollama
          - OpenAI 4o-mini
          - OpenAI GPT5
          - OpenAI Whisper
          - OpenAI o3
          - SearXing
          type: dropdown
        web_search_prompt:
          default: 'Based on the following paragraph and web search results, create
            additional content that expands on the topic section or chapter.  do not
            include any markdown formatting.  the final content should be in a single
            self contained paragraph. the final content should only contain new ideas,
            concepts, story elements or information that adds to and enhances the
            original paragraph below, do not just provide a re-written version of
            the paragraph below. just create a paragraph that extends the original
            paragraph below with all the new story building content for the section
            below:


            Original Paragraph:'
          label: Web Search Summary Prompt
          type: textarea
      title: OutlineWriterV3Node
      type: OutlineWriterV3Node
      width: 200
      x: 211
      y: 189
    b02230a3-53b8-49d1-b90a-d06a1cb59c73:
      canvas_items:
        description: 51
        drag_bar: 49
        input_input: 52
        input_label_input: 53
        output_label_output: 55
        output_output: 54
        rect: 48
        resize_handle: 56
        title: 50
      connections: []
      height: 112
      highlight_state: false
      id: b02230a3-53b8-49d1-b90a-d06a1cb59c73
      inputs:
      - input
      outputs:
      - output
      properties:
        Prompt:
          default: ''
          type: textarea
        api_endpoint:
          default: Gemini 2.5
          label: API Endpoint
          options:
          - Claude
          - GPT 5 chat
          - Gemini 2.5
          - Groq gpt-oss 120b
          - Ollama
          - OpenAI 4o-mini
          - OpenAI GPT5
          - OpenAI Whisper
          - OpenAI o3
          - SearXing
          type: dropdown
        description:
          default: Processes array elements through multiple API calls until condition
            is met.
          label: Description
          type: text
        is_end_node:
          default: true
          label: End Node
          type: boolean
        is_start_node:
          default: false
          label: Start Node
          type: boolean
        max_iterations:
          default: '20'
          description: Maximum number of iterations per array element
          label: Max Iterations
          type: text
        minimum_rating:
          default: '8.6'
          description: Minimum overall rating required (e.g., 7.5)
          label: Minimum Rating
          type: text
        node_name:
          default: Reviewer and Editor
          label: Custom Node Name
          type: text
        refinement_prompt:
          default: "You are a world-renowned writer and literary content creator tasked\
            \ with revising the provided content strictly according to the review\
            \ and suggestions below, with your output containing only the improved\
            \ content and no additional commentary. As you revise, incorporate burstiness\
            \ by consciously varying sentence lengths and structures\u2014mixing short,\
            \ impactful sentences with longer, more complex ones\u2014to create a\
            \ dynamic, engaging rhythm. Use diverse grammatical constructions to prevent\
            \ monotonous patterns and to mirror natural speech, and include poetic\
            \ elements only when they enhance the narrative or descriptive qualities.\
            \ Ensure your prose remains clear, accessible, and immersive throughout.\n\
            If the content below contains a chapter or heading of some kind, please\
            \ ensure that it is included. If the content below does not contain a\
            \ heading or chapter number, do not include one.\nIf the content below\
            \ contains the chapter number and title at the beginning, it should always\
            \ be formatted as a heading. if the content below has a \"(Continued)\
            \ - \" at the beginning, it will not be formatted as a heading.\nThe content\
            \ to improve, and suggestions are as follows:"
          label: Refinement Prompt
          type: textarea
        search_string:
          default: REVIEWPASS
          description: String to search for in validation results
          label: Search String
          type: text
        skip_first_item:
          default: true
          description: If enabled, the first array element bypasses processing but
            is still included in the final output
          label: Skip First Array Item During Processing
          type: boolean
        use_single_string:
          default: false
          description: If enabled, treats input as a single string instead of an array
          label: Use Single String Input
          type: boolean
        validation_prompt:
          default: "You are a world renowned content and literature reviewer, please\
            \ provide a critical but constructive review of the content below, to\
            \ include what you like and dont like about it, and then rate the following\
            \ content below on a scale of 1.0 to 10.0 in 6 different categories related\
            \ to the content and then provide an OVERALL RATING between 1.0 and 10.0,\
            \ and then provide 8 detailed and very specific suggestions that would\
            \ help improve the overall rating, which could include but is not limited\
            \ to incporating burstiness and varying sentence lengths and structurers,\
            \ or if it should incorporate mixing short, impactful sentences with longer,\
            \ more complex ones to create a dynamic rhythm.  should it include different\
            \ grammatical constructions to avoid monotonous patterns.  these are just\
            \ a few things that could be suggested to help improve the content below.\
            \ \n\nyou only expected output is: \nyour review, which includes what\
            \ you like and what you dont like, then 8 different categorized ratings\
            \ between 1.0 and 10.0, then the \"OVERALL RATING\" between 1.0 and 10.0,\
            \ then 8 detailed and very specific suggestions for improvement. \n\n\
            The overal rating should be formatted as follows:\nOVERALL RATING: and\
            \ then the rating with no other formatting.\n\nif the following content\
            \ starts with the word \"Title\", then do not do the review, just print\
            \ the word \"REVIEWPASS\"\n\nThe content is as follows:"
          label: Validation Prompt
          type: textarea
      title: Reviewer and Editor
      type: ArrayProcessTestProcessNode
      width: 153
      x: 618
      y: 250
    b6533fcc-5a95-4d2f-9be7-ffbba1fe2362:
      canvas_items:
        description: 60
        drag_bar: 58
        input_input: 61
        input_label_input: 62
        output_label_output: 64
        output_output: 63
        rect: 57
        resize_handle: 65
        title: 59
      height: 132
      highlight_state: false
      id: b6533fcc-5a95-4d2f-9be7-ffbba1fe2362
      inputs:
      - input
      outputs:
      - output
      properties:
        Prompt:
          default: "You will produce a single, richly detailed narrative paragraph\
            \ of 1000-2000 words that serves as a pre-draft outline for a book. The\
            \ paragraph must be complete, flowing, and cinematic \u2014 not a list\
            \ \u2014 and should feel like a short, compelling synopsis with world\
            \ building, character arcs, and act structure built in.\n\nTitle & Synopsis\n\
            If the user has not provided a title or synopsis, invent a unique, memorable\
            \ title and a short hook sentence that encapsulates tone, genre, and core\
            \ conflict before flowing into the outline.\n\nWorld / Universe\nBegin\
            \ by vividly introducing the setting \u2014 geography, political climate,\
            \ cultural quirks, and historical backdrop.\n\nState the rules and limitations\
            \ of magic, science, or supernatural elements, with at least two concrete\
            \ examples of how they influence daily life, conflict, or danger.\n\n\
            To maintain a brisk pace, demonstrate these world-building concepts through\
            \ their consequences in the plot rather than through lengthy explanatory\
            \ passages.\n\nInclude 3\u20135 distinctive named places the story will\
            \ visit and foreshadow how each will impact the plot.\n\nSeed at least\
            \ one instability or looming threat tied to the setting.\n\nMain / Side\
            \ Characters\nIntroduce the protagonist(s) with a short but vivid backstory,\
            \ core traits, and clear motivations. Ensure their character is revealed\
            \ through their actions and reactions, and include physical details that\
            \ inform their personality or history. Include one internal struggle and\
            \ one external driving goal.\n\nPresent supporting allies with unique,\
            \ memorable traits and explain their narrative purpose, grounding them\
            \ with specific physical and behavioral quirks.\n\nIntroduce the primary\
            \ antagonist(s) with enough detail to understand their motives, methods,\
            \ and how they will evolve across the story.\n\nMention 1\u20132 secondary\
            \ antagonists or opposing forces (rivals, environment, politics) to add\
            \ depth.\n\nPlot / Story Structure\nBegin with a clear, gripping inciting\
            \ incident that disrupts the protagonist\u2019s life.\n\nSketch the act\
            \ structure inside the paragraph:\n\nAct One: Initial situation, inciting\
            \ incident, and first complications.\n\nAct Two: Rising challenges, emotional\
            \ shifts, at least one twist or betrayal.\n\nAct Three: Final confrontation,\
            \ resolution, and the cost of victory.\n\nInclude two to three key subplots\
            \ that enhance relationships, reveal secrets, or deepen themes.\n\nEnsure\
            \ pacing escalates naturally, with each event more dangerous, personal,\
            \ or morally complex than the last.\n\nResolve the main plot while leaving\
            \ one or two threads dangling to connect to future books.\n\nAdditional\
            \ Guidelines Write the outline using 700\u20131000 words in one continuous\
            \ paragraph \u2014 no lists or section breaks.\n\nBalance action, worldbuilding,\
            \ and character emotion so all three feel equally present.\n\nUse specific\
            \ sensory language (sights, sounds, textures, smells) to make locations\
            \ and scenes vivid.\n\nAvoid generic phrases; every major element should\
            \ feel unique to this world.\n\nAvoid overly repetitive use of core thematic\
            \ phrases. Instead of repeatedly stating a theme, weave it into the narrative\
            \ through symbolic actions, evolving relationships, or character growth.\
            \ Allow the theme to be inferred by the reader.\n\nInclude at least five\
            \ memorable proper nouns (locations, characters, artifacts, events).\n\
            \nForeshadow the thematic core of the book (friendship, loss, ambition,\
            \ love, betrayal, etc.) through key moments in the outline.\n\nand your\
            \ final output should be a single self contained paragraph that starts\
            \ with the series title, book number, book title and author."
          label: Prompt
          type: textarea
        api_endpoint:
          default: Gemini 2.5
          label: API Endpoint
          options:
          - Claude
          - GPT 5 chat
          - Gemini 2.5
          - Groq gpt-oss 120b
          - Ollama
          - OpenAI 4o-mini
          - OpenAI GPT5
          - OpenAI Whisper
          - OpenAI o3
          - SearXing
          type: dropdown
        description:
          default: Processes the input prompt and prepares it for the API.
          label: Description
          type: text
        is_end_node:
          default: false
          label: End Node
          type: boolean
        is_start_node:
          default: true
          label: Start Node
          type: boolean
        node_name:
          default: PreWritting Draft
          label: Custom Node Name
          type: text
      title: PreWritting Draft
      type: BasicNode
      width: 129
      x: 12
      y: 26
    d407e984-dd52-4549-ae40-821e2646d5ae:
      canvas_items:
        drag_bar: 67
        input_input: 69
        input_label_input: 70
        output_label_prompt: 72
        output_prompt: 71
        rect: 66
        resize_handle: 73
        title: 68
      height: 100
      highlight_state: false
      id: d407e984-dd52-4549-ae40-821e2646d5ae
      inputs:
      - input
      outputs:
      - prompt
      properties:
        Instructions for custom formatting:
          default: 'if the section above starts with "Chapter #" then include that
            chapter number as a heading when writing the content like this with nothing
            else before it: "## Chapter # - Chapter heading....."

            Never include "(Continue) - " at the beginning of the chapter heading.

            if the section above starts with "(Continued)" then only include "(Continued)
            - " at the beginning of your output like this:  "(Continued) - content......"'
          description: Custom formatting instructions
          type: text
        Instructions for how the AI should use the next array element for context:
          default: '

            the next section to write about is as follows:

            '
          description: Template for introducing the current section
          type: text
        Instructions for how to process the Original user request and original content:
          default: 'The outline and user request is as follows and only for reference,
            do not use the same formatting as the outline:

            '
          description: Template for the context section
          type: text
        Instructions for how to processthe first element in the array:
          default: 'Please just repeat the title content below exactly and nothing
            else:


            '
          description: Prompt template for the first item
          type: text
        Main instructions for array element to focus on:
          default: As a professional writer, please write the detailed content for
            the section shown below. Do not include any of your own commentary, just
            write the content based on the section listed below. Be detailed, creative,
            giving depth and meaning and remember To incorporate burstiness into your
            writing, consciously vary sentence lengths and structures as you generate
            text - mix short, impactful sentences with longer, more complex ones to
            create a dynamic rhythm; use different grammatical constructions, monitor
            your output for monotonous patterns in real time, and adjust accordingly
            to enhance engagement and mirror natural speech patterns. Write in a natural
            storytelling format by separating dialogue, descriptions, and internal
            thoughts into distinct paragraphs. Begin a new paragraph for each new
            speaker in dialogue, and keep spoken dialogue separate from narrative
            descriptions or internal reflections. This structure ensures clarity,
            readability, and a traditional storytelling flow. The content should be
            at least 500 words long.
          description: Main instruction template for content generation
          type: text
        api_endpoint:
          default: Gemini 2.5
          label: API Endpoint
          options:
          - Claude
          - GPT 5 chat
          - Gemini 2.5
          - Groq gpt-oss 120b
          - Ollama
          - OpenAI 4o-mini
          - OpenAI GPT5
          - OpenAI Whisper
          - OpenAI o3
          - SearXing
          type: dropdown
        chunk_size:
          default: '10'
          description: Number of items to process in each chunk
          type: integer
        enable_url_selection:
          default: false
          description: Allow manual selection of URLs to scrape during review
          label: Enable URL Selection Dialog
          type: boolean
        num_results_to_skip:
          default: '0'
          description: Skip the first N search results before scraping
          label: Search Results to Skip
          type: integer
        num_search_results:
          default: '5'
          description: How many web results to pull during review
          label: Search Results to Fetch
          type: integer
        review_array:
          default: true
          description: Show review window for array output
          type: boolean
        searxng_api_url:
          default: http://localhost:8888/search
          description: Endpoint used for optional web-search enrichment
          label: SearXNG API URL
          type: text
        show_content_review:
          default: true
          description: Show content review window with web search capability
          type: boolean
        use_array:
          default: true
          description: Output as array instead of string
          type: boolean
      title: LongOutputV4
      type: LongOutputV4Node
      width: 125
      x: 463
      y: 22
name: Write long form story content
